# 🎯 A股智能分析系统 - UI 使用指南

本指南将帮助您快速上手使用全新的桌面UI界面来进行股票分析。

## 📦 什么是UI界面？

我们为原有的Python命令行股票分析系统添加了一个美观的图形界面（GUI），使用Go语言开发。现在您可以通过浏览器访问一个现代化的Web界面来使用股票分析功能，而不需要在命令行中输入命令。

### 主要优势

- ✨ **美观的界面**：现代化设计，渐变色彩，流畅动画
- 📊 **实时反馈**：实时显示分析进度和输出日志
- 🚀 **简单易用**：点击按钮即可开始分析，无需编程知识
- 🔄 **智能提示**：内置示例股票，一键填充
- 💻 **跨平台**：支持Windows、Linux、macOS

## 🚀 快速开始（Windows用户）

### 第一步：确保Python环境已配置

在使用UI之前，请先确保Python股票分析环境已经配置好：

```bash
# 进入股票分析目录
cd stock_analysis_a_stock

# 安装Python依赖
poetry install --no-root
# 或使用 uv sync

# 配置环境变量
copy .env.example .env
# 编辑.env文件，配置API密钥
```

### 第二步：启动UI

**方式A - 使用预编译程序（推荐）：**

1. 进入 `ui` 目录
2. 双击运行 `run.bat` 文件
3. 等待几秒钟，浏览器会自动打开
4. 如果浏览器没有自动打开，手动访问 http://localhost:8080

**方式B - 从源代码运行：**

```bash
cd ui
go run main.go
```

### 第三步：开始分析

1. 在界面中填写：
   - **公司名称**：例如 "贵州茅台"
   - **股票代码**：例如 "600519.SH"
   - **市场类型**：选择 "上交所(SH)"

2. 点击 **"🚀 开始分析"** 按钮

3. 观察实时输出：
   - 分析进度实时显示
   - 可以看到Python分析引擎的输出日志
   - 进度条显示分析状态

4. 查看结果：
   - 分析完成后，完整报告会显示在页面下方
   - 包含技术分析、财务分析、投资建议等

## 📝 快速示例

UI界面提供了三个预设示例，点击即可快速填充：

### 示例1：贵州茅台 (上交所)
- 公司名称：贵州茅台
- 股票代码：600519.SH
- 市场：上交所(SH)

### 示例2：平安银行 (深交所)
- 公司名称：平安银行
- 股票代码：000001.SZ
- 市场：深交所(SZ)

### 示例3：腾讯控股 (港股)
- 公司名称：腾讯控股
- 股票代码：00700.HK
- 市场：港股(HK)

## 🖼️ 界面预览

UI界面包含以下主要部分：

```
┌─────────────────────────────────────┐
│     🎯 A股智能分析系统             │  <- 标题
│   基于AI的专业股票分析平台          │
├─────────────────────────────────────┤
│  📊 公司名称: [__________]         │  <- 输入表单
│  🔢 股票代码: [__________]         │
│  🏛️ 市场类型: [▼ 上交所]          │
│                                     │
│  [🚀 开始分析]  [🔄 重置]         │  <- 操作按钮
├─────────────────────────────────────┤
│  📝 示例股票                       │  <- 快速示例
│   ▸ 贵州茅台 - 600519.SH          │
│   ▸ 平安银行 - 000001.SZ          │
│   ▸ 腾讯控股 - 00700.HK           │
├─────────────────────────────────────┤
│  ⏳ 正在分析...                    │  <- 状态显示
│  ━━━━━━━━━━━━━━ 进度条            │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ [分析输出日志...]           │   │  <- 实时日志
│  └─────────────────────────────┘   │
│                                     │
│  📈 分析结果                       │  <- 结果展示
│  [完整的分析报告内容...]           │
└─────────────────────────────────────┘
```

## 🔧 配置选项

### 更改端口

如果8080端口被占用，可以设置环境变量更改端口：

**Windows:**
```cmd
set PORT=9090
run.bat
```

**Linux/macOS:**
```bash
export PORT=9090
./run.sh
```

### 自定义分析参数

如需修改默认分析参数，可以编辑 `ui/main.go` 中的 `runAnalysis` 函数。

## 🐛 常见问题

### Q1: 双击run.bat后窗口一闪而过？

**原因**：可能是Go环境未安装或Python环境配置有问题。

**解决方案**：
1. 右键点击 `run.bat`，选择"编辑"
2. 在最后一行前添加 `pause`
3. 保存后再次运行，查看具体错误信息

### Q2: 浏览器显示"无法连接"？

**原因**：服务器未成功启动。

**解决方案**：
1. 检查命令行窗口是否有错误信息
2. 确认8080端口未被占用
3. 尝试更改端口：`set PORT=9090`

### Q3: 点击"开始分析"后没有反应？

**原因**：Python环境未正确配置或找不到分析脚本。

**解决方案**：
1. 确认已经安装Python 3.12+
2. 在命令行运行 `python --version` 验证
3. 确认 `stock_analysis_a_stock` 目录存在
4. 确认已安装所有Python依赖

### Q4: 分析过程中出现错误？

**解决方案**：
1. 查看实时输出日志中的错误信息
2. 检查股票代码格式是否正确
3. 确认Python环境依赖完整
4. 查看 `.env` 配置文件是否正确

### Q5: Windows Defender 阻止运行？

**原因**：未签名的可执行文件会被Windows Defender标记。

**解决方案**：
1. 点击"更多信息"
2. 选择"仍要运行"
3. 这是正常的安全提示，程序本身是安全的

## 🎯 使用技巧

### 技巧1: 批量分析

如果需要分析多只股票：
1. 完成第一只股票的分析
2. 复制结果保存
3. 点击"重置"按钮
4. 输入新的股票信息继续分析

### 技巧2: 保存分析报告

1. 等待分析完成
2. 在结果区域选择全部文本（Ctrl+A）
3. 复制（Ctrl+C）
4. 粘贴到文本编辑器或Word文档中保存

### 技巧3: 观察实时进度

分析过程中可以实时看到：
- Agent的思考过程
- 工具调用情况
- 数据获取进度
- 错误和警告信息

这有助于了解分析的详细过程和可能的问题。

## 📚 进阶使用

### 自定义UI

UI代码在 `ui/main.go` 的 `homeHandler` 函数中，您可以：
1. 修改HTML结构
2. 调整CSS样式
3. 扩展JavaScript功能
4. 重新编译即可看到效果

### 添加新功能

可以在Go代码中添加：
- 新的API端点
- 历史记录功能
- 批量分析功能
- 结果导出功能

### 集成其他分析模块

程序设计时考虑了扩展性，您可以：
1. 添加对 `stock_analysis` 模块的支持
2. 集成多个分析引擎
3. 提供分析模式选择

## 🔐 安全说明

- ✅ 程序仅在本地运行（127.0.0.1）
- ✅ 不会向外部发送任何数据
- ✅ 所有分析在本地执行
- ✅ 无需担心数据泄露

## 📖 技术细节

### 架构说明

```
┌──────────────┐
│   浏览器     │ <- 用户界面
└──────┬───────┘
       │ HTTP/WebSocket
┌──────▼───────┐
│  Go 服务器   │ <- UI后端
└──────┬───────┘
       │ exec
┌──────▼───────┐
│ Python分析   │ <- 分析引擎
│   (CrewAI)   │
└──────────────┘
```

### 通信流程

1. 用户在浏览器中填写股票信息
2. JavaScript通过POST请求发送到Go服务器
3. Go服务器创建分析会话
4. Go调用Python脚本执行分析
5. Python输出通过WebSocket实时推送到浏览器
6. 分析完成后展示最终结果

### 为什么选择Go？

- ⚡ **性能优秀**：Go编译成原生二进制，启动快速
- 🔧 **易于部署**：单个可执行文件，无需依赖
- 🌐 **Web支持好**：内置HTTP服务器，WebSocket支持完善
- 📦 **跨平台**：一次编写，多平台编译

## 📞 获取帮助

如果遇到问题：
1. 查看本文档的"常见问题"部分
2. 查看 `ui/README.md` 获取技术细节
3. 检查命令行输出的错误信息
4. 提交Issue到GitHub仓库

## 🎉 开始使用

现在您已经了解了如何使用UI界面，开始您的股票分析之旅吧！

```bash
cd ui
run.bat    # Windows
./run.sh   # Linux/macOS
```

祝您投资顺利！📈

---

**免责声明**：本系统提供的分析仅供参考，不构成投资建议。投资有风险，入市需谨慎。
